{% extends "base.html" %}
{% block title %}Sistema de Vigilancia || Papelera de Videos{% endblock %}
{% block nav %}
<nav class="navbar-sidebar">
    <ul class="list-unstyled navbar__list">
        <li class="has-sub">
            <a class="js-arrow" href="{{url_for('camaras')}}">
                <i class="fas fa-home"></i>Inicio</a>
        </li>
        <li class="has-sub">
            <a class="js-arrow" href="{{url_for('ondemand')}}">
                <img src="{{url_for('static', path='/img/searchv.png')}}" class="imgV">Buscador de Videos</a>
        </li>
        {% if tipo == "Administrador" %}
        <li class="has-sub">
            <a class="js-arrow" href="{{url_for('dashboard')}}">
                <i class="fas fa-users"></i>Usuarios</a>
        </li>
        <li class="active has-sub">
            <a class="js-arrow" href="{{url_for('papelera')}}">
                <i class="fas fa-trash"></i>Papelera de Videos</a>
        </li>
        {% endif %}
    </ul>
</nav>
{% endblock %}
{% block user %}
{{name}}
{% endblock %}
{% block body %}

<div class="py-5 px-5" id="container">
    {% if videos|length > 0 %}
    <h2 style="text-align: center;">Papelera de Videos</h2>
    <div class="mt-3 container table-responsive">
        <table class="table table-light table-hover">
            <thead>
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Fecha</th>
                    <th scope="col">Duracion</th>
                    <th scope="col">Acci√≥n</th>
                </tr>
            </thead>
            <tbody>
                {% for video in videos %}
                <tr>
                    <td>{{ video[0] }}</td>
                    <td>{{ video[1] }}</td>
                    <td>{{ video[2] }}</td>
                    <td>{{ video[6] }}</td>
                    <td class="d-flex flex-row flex-wrap justify-content-center">
                        <a href="{{ url_for('video_streaming') }}?video_papelera={{ video[0] }}" class="btn btn-primary btn-video d-inline-block m-1" data-bs-toggle="modal" data-bs-target="#videoModal" data-fecha="{{ video[1] }}" data-id="{{ video[0] }}" style="width: min-content;">Ver</a>
                        <a class="btn btn-danger d-inline-block m-1" href="{{ url_for('eliminar_video') }}?video_papelera={{ video[0] }}" style="width: min-content;">Eliminar</a>
                        <a class="btn btn-success d-inline-block m-1" href="{{ url_for('restaurar_video') }}?video_papelera={{ video[0] }}" style="width: min-content;">Restaurar</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- MODAL PARA VER VIDEO -->
    <div class="modal fade" id="videoModal" tabindex="-1" aria-labelledby="ModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-md modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ModalLabel"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <video id="video-modal" class="video-js video-modal vjs-16-9 vjs-big-play-centered" controlsList="nodownload">
                        <source src="#" type='video/mp4'>
                    </video>
                </div>
                <div class="modal-footer w-100">
                </div>
            </div>
        </div>
    </div>
    {% else %}
        <h2 style="text-align: center;">Papelera de Videos</h2>
        <h3 class="mt-5">La papelera actualmente se encuentra vacia</h3>
    {% endif %}
</div>

{% endblock %}